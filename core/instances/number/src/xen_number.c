#include <ctype.h>
#include <limits.h>
#include <stdint.h>

#include "xen_number.h"
#include "xen_number_instance.h"
#include <ctype.h>
#include <stdint.h>

Xen_Number *Xen_Number_From_CString(const char *cstring, int base) {
  if (!cstring) { return NULL; }
  int8_t sign = 1;
  const char *start, *end;
  Xen_Number *z;
  const char *str = cstring;
  while (*str && isspace(*str))
    str++;
  if (*str == '+') {
    str++;
  } else if (*str == '-') {
    sign = -1;
    str++;
  }
  start = str;
  end = str;
  while (Xen_Char_Digit_Value[*end] < base && Xen_Char_Digit_Value[*end] != -1)
    end++;

  if (end == str) { return NULL; }
  return z;
}

const signed char Xen_Char_Digit_Value[256] = {
    /* 0x00–0x0F */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0x10–0x1F */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0x20–0x2F (espacios, !"#$%&'()*+,-./) */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0x30–0x3F ('0'–'9' : 0–9) */
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -1, -1, -1, -1, -1, -1,

    /* 0x40–0x4F ('A'–'O') */
    -1, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,

    /* 0x50–0x5F ('P'–'Z') */
    25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, -1, -1, -1, -1, -1,

    /* 0x60–0x6F ('`', 'a'–'o') */
    -1, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,

    /* 0x70–0x7F ('p'–'z') */
    25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, -1, -1, -1, -1, -1,

    /* 0x80–0x8F */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0x90–0x9F */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0xA0–0xAF */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0xB0–0xBF */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0xC0–0xCF */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0xD0–0xDF */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0xE0–0xEF */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,

    /* 0xF0–0xFF */
    -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1};
